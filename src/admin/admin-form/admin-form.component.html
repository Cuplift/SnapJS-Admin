<form novalidate (ngSubmit)="submit()" class="form-horizontal">
  <div *ngFor="let schemaKey of schemaKeys">
    <div [ngSwitch]="schema[schemaKey].instanceOverride || schema[schemaKey].instance">
      <app-formcontrol-input
        *ngSwitchCase="'Boolean'"
        [forEmbedded]="forEmbedded"
        [embeddedGroupName]="embeddedGroupName"
        [modelPath]="getModelPath()"
        [field]="schemaKey"
        [displayName]="schema[schemaKey].displayName || schemaKey"
        [inputType]="'checkbox'">
      </app-formcontrol-input>

      <app-formcontrol-input
        *ngSwitchCase="'Number'"
        [modelPath]="getModelPath()"
        [forEmbedded]="forEmbedded"
        [embeddedGroupName]="embeddedGroupName"
        [field]="schemaKey"
        [displayName]="schema[schemaKey].displayName || schemaKey"
        [inputType]="'number'">
      </app-formcontrol-input>

      <app-formcontrol-input
        *ngSwitchCase="'Date'"
        [modelPath]="getModelPath()"
        [forEmbedded]="forEmbedded"
        [embeddedGroupName]="embeddedGroupName"
        [field]="schemaKey"
        [displayName]="schema[schemaKey].displayName || schemaKey"
        [inputType]="'datetime-local'">
      </app-formcontrol-input>

      <app-formcontrol-input
        *ngSwitchCase="'Hidden'"
        [modelPath]="getModelPath()"
        [forEmbedded]="forEmbedded"
        [embeddedGroupName]="embeddedGroupName"
        [field]="schemaKey"
        [displayName]="schema[schemaKey].displayName || schemaKey"
        [inputType]="'hidden'">
      </app-formcontrol-input>

      <app-formcontrol-input
        *ngSwitchCase="'Disabled'"
        [modelPath]="getModelPath()"
        [forEmbedded]="forEmbedded"
        [embeddedGroupName]="embeddedGroupName"
        [field]="schemaKey"
        [displayName]="schema[schemaKey].displayName || schemaKey"
        [inputType]="'text'">
      </app-formcontrol-input>

      <!-- Single embedded document -->
      <div *ngSwitchCase="'Embedded'">
        <app-formcontrol-group
          [disabled]="schema[schemaKey].instanceOptions && schema[schemaKey].instanceOptions.disabled"
          [field]="schemaKey"
          [displayName]="schema[schemaKey].displayName || schemaKey"
          [schema]="schema[schemaKey].schema.paths">
        </app-formcontrol-group>
      </div>

      <!-- Default input type -->
      <div *ngSwitchDefault>
        <app-formcontrol-input
          [modelPath]="getModelPath()"
          [forEmbedded]="forEmbedded"
          [embeddedGroupName]="embeddedGroupName"
          [field]="schemaKey"
          [inputType]="'text'"
          [displayName]="schema[schemaKey].displayName || schemaKey">
        </app-formcontrol-input>
      </div>
    </div>

    <!-- Display validation errors -->
    <control-errors [control]="form.controls[schemaKey]"></control-errors>
  </div>

  <!-- <button type="submit" [disabled]="!form.valid">Save</button> -->
  <button *ngIf="!forEmbedded" type="submit">Save</button>
</form>
